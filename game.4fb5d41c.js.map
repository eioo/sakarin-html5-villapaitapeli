{"version":3,"sources":["sound.ts","game.ts"],"names":[],"mappings":"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","file":"game.4fb5d41c.js","sourceRoot":"..\\src","sourcesContent":["const audio = new Audio();\r\n\r\nexport async function playSound(name: string) {\r\n  return new Promise(resolve => {\r\n    try {\r\n      audio.src = `assets/sounds/${name}.mp3`;\r\n      audio.play();\r\n\r\n      audio.onended = () => {\r\n        resolve();\r\n      };\r\n\r\n      return audio;\r\n    } catch {\r\n      throw new Error(`Could not find sound with name: ${name}`);\r\n    }\r\n  });\r\n}\r\n\r\nexport function stopSound() {\r\n  audio.pause();\r\n}\r\n","import { playSound, stopSound } from './sound';\r\n\r\nconst $ = document.querySelector.bind(document);\r\nconst $$ = document.querySelectorAll.bind(document);\r\nconst startBtn = $('.start-button') as HTMLButtonElement;\r\nconst noBtn = $('.no-button') as HTMLButtonElement;\r\nconst yesBtn = $('.yes-button') as HTMLButtonElement;\r\nconst retryButtons = Array.from($$('.retry-button')) as HTMLButtonElement[];\r\n\r\nconst gameStates = {\r\n  intro: () => {\r\n    playSound('sakarin_villapaitapeli');\r\n  },\r\n  question: () => {\r\n    playSound('pue_sakarille_villapaita');\r\n  },\r\n  selectedNo: async () => {\r\n    await playSound('hmm');\r\n    changeGameState('gameLost');\r\n  },\r\n  selectedYes: () => {\r\n    stopSound();\r\n    setTimeout(() => {\r\n      changeGameState('tickling');\r\n    }, 1500);\r\n  },\r\n  tickling: async () => {\r\n    await playSound('hihihi_kutittaa');\r\n    changeGameState('gameWon');\r\n  },\r\n  gameLost: () => {\r\n    playSound('hÃ¤visit_pelin');\r\n  },\r\n  gameWon: () => {\r\n    playSound('voitit_pelin');\r\n  },\r\n};\r\n\r\nfunction bindEventListeners() {\r\n  startBtn.onclick = () => {\r\n    changeGameState('question');\r\n  };\r\n  noBtn.onclick = () => {\r\n    changeGameState('selectedNo');\r\n  };\r\n  yesBtn.onclick = () => {\r\n    changeGameState('selectedYes');\r\n  };\r\n  retryButtons.forEach(\r\n    btn =>\r\n      (btn.onclick = () => {\r\n        changeGameState('intro');\r\n      })\r\n  );\r\n}\r\n\r\nfunction changeGameState(name: keyof typeof gameStates) {\r\n  const children = Array.from($$('.game > div')) as HTMLElement[];\r\n  children.forEach(c => (c.style.display = 'none'));\r\n\r\n  const stageElement = $(`div[data-stage=\"${name}\"]`) as HTMLDivElement;\r\n  stageElement.style.display = 'block';\r\n\r\n  gameStates[name]();\r\n}\r\n\r\nfunction start() {\r\n  bindEventListeners();\r\n  changeGameState('intro');\r\n}\r\n\r\nstart();\r\n"]}